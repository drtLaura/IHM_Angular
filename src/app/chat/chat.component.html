<div class="chat">
  <!-- Si la liste des amis n'est pas affichée -->
  <ng-container *ngIf="!showFriends">

    <!-- Liste des conversations -->
    <div id="chats-list">
      <ng-container *ngFor="let chat of chats">
        <!-- Vérification si l'utilisateur est le courant -->
        <ng-container *ngIf="!isCurrentUser(chat)">
          <p>Veuillez vous connecter pour accéder à cette section.</p>
        </ng-container>
        <ng-container *ngIf="isCurrentUser(chat)">
          <ng-container *ngIf="!showMessages">
          <h2 id="chat-title">Discussions</h2>
          <div id="button-chat">
            <!-- Bouton pour afficher la liste des amis -->
            <button type="button" id="show-friends" (click)="toggleFriends()">
              <svg xmlns="http://www.w3.org/2000/svg" height="25" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24">
                <path
                  d="M21.232,2.845c-.103-.322-.362-.57-.688-.659-.177-.048-4.369-1.186-7.613-1.186-3.334,0-7.446,1.139-7.619,1.188-.337,.094-.601,.358-.694,.696-.012,.045-.096,.351-.213,.86h-.766c-.829,0-1.5,.671-1.5,1.5s.671,1.5,1.5,1.5h.202c-.07,.472-.137,.976-.195,1.504h-.577c-.829,0-1.5,.671-1.5,1.5s.671,1.5,1.5,1.5h.372c-.006,.249-.009,.499-.009,.752s.003,.503,.009,.752h-.372c-.829,0-1.5,.671-1.5,1.5s.671,1.5,1.5,1.5h.577c.058,.528,.125,1.032,.195,1.504h-.203c-.829,0-1.5,.671-1.5,1.5s.671,1.5,1.5,1.5h.767c.117,.509,.2,.814,.213,.859,.092,.333,.349,.596,.681,.693,.165,.049,4.077,1.191,7.633,1.191s7.467-1.143,7.632-1.191c.318-.094,.569-.339,.67-.656,.049-.154,1.198-3.825,1.198-9.153s-1.149-9.002-1.199-9.155Zm-11.546,3.925c.248-.737,.835-1.324,1.572-1.572,1.11-.373,2.236-.372,3.346,0,.737,.248,1.324,.835,1.572,1.572,.372,1.11,.372,2.236,0,3.346-.248,.737-.835,1.324-1.572,1.572-.555,.186-1.114,.279-1.672,.279s-1.118-.093-1.673-.279c-.737-.248-1.324-.835-1.572-1.572-.372-1.11-.372-2.236,0-3.346Zm6.697,12.311c-.552,0-1-.448-1-1,0-1.352-1.1-2.452-2.452-2.452s-2.453,1.1-2.453,2.452c0,.552-.448,1-1,1s-1-.448-1-1c0-2.455,1.998-4.452,4.453-4.452s4.452,1.997,4.452,4.452c0,.552-.448,1-1,1Z" />
              </svg>
            </button>

            <!-- Bouton pour créer une nouvelle conversation -->
            <button type="button">
              <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="25"
                height="25">
                <path
                  d="m20,0H4C1.794,0,0,1.794,0,4v12c0,2.206,1.794,4,4,4h2.923l3.748,3.157c.382.339.862.507,1.337.507.467,0,.931-.162,1.293-.484l3.847-3.18h2.852c2.206,0,4-1.794,4-4V4c0-2.206-1.794-4-4-4Zm-4,11h-3v3c0,.552-.448,1-1,1s-1-.448-1-1v-3h-3c-.552,0-1-.448-1-1s.448-1,1-1h3v-3c0-.552.448-1,1-1s1,.448,1,1v3h3c.552,0,1,.448,1,1s-.448,1-1,1Z" />
              </svg>
            </button>
          </div>


          <ul>
            <li>
              <button type="button" id="chat-list" (click)="toggleMessages(chat)">
                {{ chat.name }}
              </button>
            </li>
          </ul>
        </ng-container>

        <!-- Affichage des messages -->
          <ng-container *ngIf="showMessages">
            <div class="back">
              <button (click)="toggleMessages()" class="back-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5"/>
                </svg>
                Retour
              </button>
            </div>
            <h2>{{ chat.name }}</h2>
          <app-messages></app-messages>
          </ng-container>
        </ng-container>
      </ng-container>

    </div>

    
  </ng-container>

  <!-- Si la liste des amis est affichée -->
  <ng-container *ngIf="showFriends">
    <div class="back">
      <button (click)="toggleFriends()" class="back-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5"/>
        </svg>
        Retour
      </button>
    </div>
    <app-friends></app-friends>
  </ng-container>
</div>